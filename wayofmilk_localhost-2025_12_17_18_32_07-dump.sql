--
-- PostgreSQL database dump
--

-- Dumped from database version 17.2
-- Dumped by pg_dump version 17.2

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: wayofmilk; Type: DATABASE; Schema: -; Owner: postgres
--

CREATE DATABASE wayofmilk WITH TEMPLATE = template0 ENCODING = 'UTF8' LOCALE_PROVIDER = libc LOCALE = 'English_United States.1252';


ALTER DATABASE wayofmilk OWNER TO postgres;

\connect wayofmilk

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: public; Type: SCHEMA; Schema: -; Owner: pg_database_owner
--

CREATE SCHEMA public;


ALTER SCHEMA public OWNER TO pg_database_owner;

--
-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: pg_database_owner
--

COMMENT ON SCHEMA public IS 'standard public schema';


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: container; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.container (
    id bigint NOT NULL,
    capacity_l double precision,
    occupied_capacity_l double precision
);


ALTER TABLE public.container OWNER TO postgres;

--
-- Name: container_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.container ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.container_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: cow; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.cow (
    id bigint NOT NULL,
    birth_date date,
    is_healthy boolean NOT NULL,
    reg_no character varying(255),
    department_id bigint,
    registered_by bigint
);


ALTER TABLE public.cow OWNER TO postgres;

--
-- Name: cow_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.cow ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.cow_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: customer; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.customer (
    id bigint NOT NULL,
    companycvr character varying(255),
    company_name character varying(255),
    email character varying(255),
    phone_no character varying(255),
    registered_by_id bigint
);


ALTER TABLE public.customer OWNER TO postgres;

--
-- Name: customer_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.customer ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.customer_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: departments; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.departments (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    type character varying(255),
    CONSTRAINT departments_type_check CHECK (((type)::text = ANY ((ARRAY['QUARANTINE'::character varying, 'MILKING'::character varying, 'RESTING'::character varying])::text[])))
);


ALTER TABLE public.departments OWNER TO postgres;

--
-- Name: departments_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.departments ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.departments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: milk; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.milk (
    id bigint NOT NULL,
    approved_for_storage boolean NOT NULL,
    date date,
    milk_test_result character varying(255),
    volumel double precision NOT NULL,
    container_id bigint,
    cow_id bigint,
    registered_by_id bigint,
    CONSTRAINT milk_milk_test_result_check CHECK (((milk_test_result)::text = ANY ((ARRAY['UNKNOWN'::character varying, 'PASS'::character varying, 'FAIL'::character varying])::text[])))
);


ALTER TABLE public.milk OWNER TO postgres;

--
-- Name: milk_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.milk ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.milk_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: sale; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sale (
    id bigint NOT NULL,
    date_time timestamp(6) without time zone,
    price double precision NOT NULL,
    quantityl double precision NOT NULL,
    recall_case boolean NOT NULL,
    container_id bigint,
    created_by_id bigint,
    customer_id bigint
);


ALTER TABLE public.sale OWNER TO postgres;

--
-- Name: sale_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.sale ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.sale_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: transfer_record; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.transfer_record (
    id bigint NOT NULL,
    moved_at timestamp(6) without time zone,
    approved_by_vet_id bigint,
    cow_id bigint,
    from_department_id bigint,
    requested_by_id bigint,
    to_department_id bigint
);


ALTER TABLE public.transfer_record OWNER TO postgres;

--
-- Name: transfer_record_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.transfer_record ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.transfer_record_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    user_type character varying(31) NOT NULL,
    id bigint NOT NULL,
    address character varying(255),
    email character varying(255),
    name character varying(255),
    password character varying(255),
    phone character varying(255),
    role character varying(255),
    license_number character varying(255),
    CONSTRAINT users_role_check CHECK (((role)::text = ANY ((ARRAY['OWNER'::character varying, 'WORKER'::character varying, 'VET'::character varying])::text[])))
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: container; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.container (id, capacity_l, occupied_capacity_l) FROM stdin;
3	500	0
1	100	25
2	100	40
\.


--
-- Data for Name: cow; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.cow (id, birth_date, is_healthy, reg_no, department_id, registered_by) FROM stdin;
1	2023-02-10	f	CowToTest1	1	1
2	2023-12-04	t	CowToTest2	1	1
3	2025-12-17	t	Cowlee	2	1
4	2020-12-17	t	ACowForABee	3	1
5	2024-12-17	t	AnotherCow	2	1
\.


--
-- Data for Name: customer; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.customer (id, companycvr, company_name, email, phone_no, registered_by_id) FROM stdin;
1	most	Most Customer	most@customer.com	11111111111	\N
2	222Customer	Second Most Customer	222@customer.com	222222222	\N
\.


--
-- Data for Name: departments; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.departments (id, name, type) FROM stdin;
1	Quarantine	QUARANTINE
2	Milkan Barn	MILKING
3	Retirement Barn	RESTING
\.


--
-- Data for Name: milk; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.milk (id, approved_for_storage, date, milk_test_result, volumel, container_id, cow_id, registered_by_id) FROM stdin;
1	t	2025-12-17	PASS	30	1	2	1
2	t	2025-12-17	PASS	30	1	3	1
3	t	2025-12-17	PASS	25	1	4	1
4	t	2025-12-17	PASS	40	2	5	1
5	t	2025-12-17	PASS	40	2	2	1
\.


--
-- Data for Name: sale; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.sale (id, date_time, price, quantityl, recall_case, container_id, created_by_id, customer_id) FROM stdin;
1	2025-12-17 00:00:00	1	25	f	1	1	1
2	2025-12-17 00:00:00	1	10	f	2	1	2
3	2025-12-17 00:00:00	1	35	f	1	1	2
4	2025-12-17 00:00:00	1	30	f	2	1	1
\.


--
-- Data for Name: transfer_record; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.transfer_record (id, moved_at, approved_by_vet_id, cow_id, from_department_id, requested_by_id, to_department_id) FROM stdin;
1	2025-12-25 00:00:00	\N	3	1	1	2
2	2025-12-25 00:00:01	\N	4	1	1	3
3	2025-12-25 00:00:02	\N	5	1	1	2
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (user_type, id, address, email, name, password, phone, role, license_number) FROM stdin;
OWNER	1	Admin Street 00	admin@gmail.com	Admin	$2a$10$bSM3pDezRmtq.Pi7xknKu.YzJkDgpmB2Bv2QGJbqgHx5nHagii4q.	00000000	OWNER	\N
VET	2	vet street in vet land	vet@gmail.com	Vet Vettus	$2a$10$wtT/3REE0ZGtB6Elx38zF.b4lyEkQ.gB4YvHyhCdatJ8yqsTEi.Y6	264996445113	VET	thisisavetlicense
WORKER	3	worker street	worker@gmail.com	Worker Person	$2a$10$rjsBLYW7fAIhfK1ESqxluuzpB6gyLbwd1fZ6cT/VZmMcG4sUZ7gIi	515874254	WORKER	\N
\.


--
-- Name: container_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.container_id_seq', 3, true);


--
-- Name: cow_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.cow_id_seq', 5, true);


--
-- Name: customer_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.customer_id_seq', 2, true);


--
-- Name: departments_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.departments_id_seq', 3, true);


--
-- Name: milk_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.milk_id_seq', 5, true);


--
-- Name: sale_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.sale_id_seq', 4, true);


--
-- Name: transfer_record_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.transfer_record_id_seq', 3, true);


--
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_seq', 3, true);


--
-- Name: container container_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.container
    ADD CONSTRAINT container_pkey PRIMARY KEY (id);


--
-- Name: cow cow_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cow
    ADD CONSTRAINT cow_pkey PRIMARY KEY (id);


--
-- Name: customer customer_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.customer
    ADD CONSTRAINT customer_pkey PRIMARY KEY (id);


--
-- Name: departments departments_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.departments
    ADD CONSTRAINT departments_pkey PRIMARY KEY (id);


--
-- Name: milk milk_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.milk
    ADD CONSTRAINT milk_pkey PRIMARY KEY (id);


--
-- Name: sale sale_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sale
    ADD CONSTRAINT sale_pkey PRIMARY KEY (id);


--
-- Name: transfer_record transfer_record_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transfer_record
    ADD CONSTRAINT transfer_record_pkey PRIMARY KEY (id);


--
-- Name: cow ukh59gweiluy14wpwx7yc5wtdbc; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cow
    ADD CONSTRAINT ukh59gweiluy14wpwx7yc5wtdbc UNIQUE (reg_no);


--
-- Name: departments ukj6cwks7xecs5jov19ro8ge3qk; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.departments
    ADD CONSTRAINT ukj6cwks7xecs5jov19ro8ge3qk UNIQUE (name);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: milk fk1th49bpgmkyqkjiqs2plj2twt; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.milk
    ADD CONSTRAINT fk1th49bpgmkyqkjiqs2plj2twt FOREIGN KEY (registered_by_id) REFERENCES public.users(id);


--
-- Name: customer fk6yxn1jloa1rlcu0ipwwysg801; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.customer
    ADD CONSTRAINT fk6yxn1jloa1rlcu0ipwwysg801 FOREIGN KEY (registered_by_id) REFERENCES public.users(id);


--
-- Name: transfer_record fk9fewu5fafd6ckp5biumsigtsl; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transfer_record
    ADD CONSTRAINT fk9fewu5fafd6ckp5biumsigtsl FOREIGN KEY (cow_id) REFERENCES public.cow(id);


--
-- Name: transfer_record fk9nf055jipeumetiekhswwl48g; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transfer_record
    ADD CONSTRAINT fk9nf055jipeumetiekhswwl48g FOREIGN KEY (approved_by_vet_id) REFERENCES public.users(id);


--
-- Name: sale fkbal46vhy30xloat8atuv91gmx; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sale
    ADD CONSTRAINT fkbal46vhy30xloat8atuv91gmx FOREIGN KEY (created_by_id) REFERENCES public.users(id);


--
-- Name: milk fkdg5qrht3d64jl9d7k08yajm3g; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.milk
    ADD CONSTRAINT fkdg5qrht3d64jl9d7k08yajm3g FOREIGN KEY (container_id) REFERENCES public.container(id);


--
-- Name: transfer_record fkdwn8mgyf7uue5hpj6ljp4xr3n; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transfer_record
    ADD CONSTRAINT fkdwn8mgyf7uue5hpj6ljp4xr3n FOREIGN KEY (to_department_id) REFERENCES public.departments(id);


--
-- Name: cow fkeh9n53piwpgb5js6l39fyngg7; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cow
    ADD CONSTRAINT fkeh9n53piwpgb5js6l39fyngg7 FOREIGN KEY (registered_by) REFERENCES public.users(id);


--
-- Name: sale fkfbd6mlunwdxorm3aihvpdxlkx; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sale
    ADD CONSTRAINT fkfbd6mlunwdxorm3aihvpdxlkx FOREIGN KEY (container_id) REFERENCES public.container(id);


--
-- Name: milk fkhhv15ns7m0mmwa8824mc37l6o; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.milk
    ADD CONSTRAINT fkhhv15ns7m0mmwa8824mc37l6o FOREIGN KEY (cow_id) REFERENCES public.cow(id);


--
-- Name: sale fkjw88ojfoqquyd9f1obip1ar0g; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sale
    ADD CONSTRAINT fkjw88ojfoqquyd9f1obip1ar0g FOREIGN KEY (customer_id) REFERENCES public.customer(id);


--
-- Name: transfer_record fkob1h3q77sd98hr093xb6o9vlv; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transfer_record
    ADD CONSTRAINT fkob1h3q77sd98hr093xb6o9vlv FOREIGN KEY (requested_by_id) REFERENCES public.users(id);


--
-- Name: cow fkofyv4yq75v3c5mjenr5472biw; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cow
    ADD CONSTRAINT fkofyv4yq75v3c5mjenr5472biw FOREIGN KEY (department_id) REFERENCES public.departments(id);


--
-- Name: transfer_record fkoma8gcho9sgwoxlmwdss12xl3; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transfer_record
    ADD CONSTRAINT fkoma8gcho9sgwoxlmwdss12xl3 FOREIGN KEY (from_department_id) REFERENCES public.departments(id);


--
-- PostgreSQL database dump complete
--

