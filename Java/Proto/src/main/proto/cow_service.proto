syntax = "proto3";

//if importing related proto files:
//import "other_service.proto";

// Defining the Java package where the generated code will live
option java_package = "sep3.wayofmilk.grpc";
option java_multiple_files = true;

// The service T3 will implement and T2 will call
service CowService {
  rpc GetAllCows (Empty) returns (CowList);
  rpc AddCow (CowCreationRequest) returns (CowData);
  // rpc UpdateCow (CowData) returns (CowData) // for the next feature
}

// The messages (equivalents of the DTOs)
message Empty {} // Simple empty message for requests with no parameters

message CowList {
  repeated CowData cows = 1; // 'repeated' means a list
}
message CowCreationRequest {
  string regNo = 1;
  string birthDate = 2; // Using string for dates, and handling conversion (LocalDate <-> string) in the service layer
}

message CowData {
  int64 id = 1;         // Corresponds to 'long' in Java
  string regNo = 2;
  // Using string for dates, and handling conversion (LocalDate <-> string) in the service layer
  string birthDate = 3;
  bool isHealthy = 4;
}