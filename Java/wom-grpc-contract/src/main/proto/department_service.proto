syntax = "proto3";

import "repeatingMessageTypes.proto";
import "cow_service.proto";
import "transferRecord_service.proto";

option java_package = "sep3.wayofmilk.grpc";
option java_multiple_files = true;
option csharp_namespace = "Sep3.WayOfMilk.Grpc";

// ========== MESSAGES ==========

// Matches DepartmentDataDTO
message DepartmentData {
  int64 id = 1;
  string type = 2; // MILKING / RESTING / QUARANTINE
  repeated CowData cows = 3;
  repeated TransferRecordData transfersFrom = 4;
  repeated TransferRecordData transfersTo = 5;
}

// Matches DepartmentCreationDTO
message DepartmentCreationRequest {
  string type = 1; // enum as string because we parse in mapper/service
}

message DepartmentIdRequest {
  int64 id = 1;
}

message DepartmentTypeRequest {
  string type = 1;  // MILKING/RESTING/QUARANTINE
}

message DepartmentList {
  repeated DepartmentData departments = 1;
}

// ========== SERVICE ==========

service DepartmentService {
  rpc GetAllDepartments (Empty) returns (DepartmentList);
  rpc AddDepartment (DepartmentCreationRequest) returns (DepartmentData);
  rpc GetDepartmentById (DepartmentIdRequest) returns (DepartmentData);
  rpc GetDepartmentsByType (DepartmentTypeRequest) returns (DepartmentList);
  rpc UpdateDepartment (DepartmentData) returns (DepartmentData);
  rpc DeleteDepartment (DepartmentIdRequest) returns (Empty);
  rpc GetCowsByDepartment(DepartmentIdRequest) returns (CowList);
  rpc GetTransferRecordsByDepartment(DepartmentIdRequest) returns (TransferRecordList);

}